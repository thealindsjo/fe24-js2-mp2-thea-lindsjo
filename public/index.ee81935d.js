async function t(){let t=await fetch("https://dummyjson.com/products");return(await t.json()).products}class e{constructor({title:t,thumbnail:e,stock:r,price:c,discountPercentage:i,category:n,rating:o}){this.title=t,this.thumbnail=e,this.stock=r,this.price=c,this.discountPercentage=i,this.category=n,this.rating=o}getDiscountedPrice(){return(this.price*(1-this.discountPercentage/100)).toFixed(2)}updateStock(t){this.stock=Math.max(this.stock-t,0)}get productStock(){return this.stock}get productCategory(){return this.category}get productRating(){return this.rating}renderProductCard(t){let e=document.createElement("div");e.className="product-card";let r=this.price.toFixed(2),c=this.getDiscountedPrice();return e.innerHTML=`
            <img src="${this.thumbnail}" alt="${this.title}">
            <h3>${this.title}</h3>
            <p>
                Price: <span class="original-price">$${r}</span>
                <span class="discounted-price">$${c}</span>
            </p>
            <p>Stock: ${this.stock}</p>
            <div><button class="add-to-cart">Add to Cart</button></div>
        `,e.querySelector(".add-to-cart").addEventListener("click",()=>{this.stock>0?(t(),this.updateStock(1),e.querySelector("p:nth-child(4)").textContent=`Stock: ${this.stock}`):alert("Out of stock!")}),e}}class r{addProduct(t){this.items.push(t)}getItems(){return this.items}getTotalPrice(){return this.items.reduce((t,e)=>t+parseFloat(e.getDiscountedPrice()),0).toFixed(2)}constructor(){this.items=[]}}document.addEventListener("DOMContentLoaded",async()=>{let c=new r,i=(await t()).map(t=>new e(t)),n="",o=null,s="price",a=!0;function d(){var t,e,r,d;let u=i;n&&(t=u,e=n,u=t.filter(t=>t.productCategory===e)),null!==o&&(r=u,d=o,u=r.filter(t=>parseFloat(t.getDiscountedPrice())<=d)),"price"===s?u=function(t,e=!0){return t.sort((t,r)=>e?parseFloat(t.getDiscountedPrice())-parseFloat(r.getDiscountedPrice()):parseFloat(r.getDiscountedPrice())-parseFloat(t.getDiscountedPrice()))}(u,a):"rating"===s&&(u=function(t,e=!0){return t.sort((t,r)=>e?t.productRating-r.productRating:r.productRating-t.productRating)}(u,a)),function(t){let e=document.querySelector("#product-list");e.innerHTML="",t.forEach(t=>{e.appendChild(t.renderProductCard(()=>c.addProduct(t)))})}(u)}document.querySelector("#category-filter").addEventListener("change",t=>{n=t.target.value,d()}),document.querySelector("#price-filter").addEventListener("input",t=>{o=parseFloat(t.target.value)||null,d()}),document.querySelector("#sort-price").addEventListener("click",()=>{s="price",a=!a,d()}),document.querySelector("#sort-rating").addEventListener("click",()=>{s="rating",a=!a,d()}),d()});
//# sourceMappingURL=index.ee81935d.js.map
